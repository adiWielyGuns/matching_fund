import{b as i,d as r,g as o,u as c,H as $,h as n,F as b,m as k,e as l,l as w,i as y,j as d,w as x,v as V,k as u,J as S,p as M,t as C,K as j,M as N}from"./app.31832510.js";import{_ as D,r as p,a as O,b as m}from"./Select2.98a413b2.js";import{_ as T}from"./select2.606c2bc8.js";import{_}from"./Button.41bc693d.js";import{_ as f}from"./Input.89c281e7.js";import{_ as g}from"./Label.d2114dcb.js";import{C as F,N as H,S as I}from"./carousel.es.333d0818.js";import{_ as P}from"./plugin-vue_export-helper.21dcd24c.js";/* empty css                                              */const J={data(){return{table:this.$page.props.table}}},R=Object.assign(J,{__name:"Meja",props:["modelValue"],emits:["update:modelValue"],setup(e){return(a,t)=>(i(),r("div",null,[o(D,{ref:"resi",value:e.modelValue,opsi:a.table,async:!1,maximumSelectionLength:2,tags:!1,multiple:!1,placeholder:"Pilih Nomor Meja",onInput:t[0]||(t[0]=s=>a.$emit("update:modelValue",s))},null,8,["value","opsi"])]))}});const v=e=>(j("data-v-4c7ddaf5"),e=e(),N(),e),U={class:"py-8"},q={class:"mb-6"},L={class:"carousel__item"},Y=["src"],A={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},B=v(()=>l("div",{class:"col-span-12 text-center"},[l("p",{class:"text-center text-xl font-bold mb-6"},[l("b",null,[d("Matching Fund"),l("br"),d("Minggirsari")])])],-1)),W={class:"col-span-12 text-center"},E=v(()=>l("div",{class:"col-span-12 text-center"},[l("p",{class:"text-center py-6 text-sm"},[d(" Tekan order sekarang untuk melakukan pemesanan "),l("br"),d(" atau lakukan reservasi dibawah ini ")])],-1)),z={class:"col-span-12 text-center"},G=v(()=>l("span",{class:"text-white font-extrabold"},"Isi Data Anda",-1)),K={class:"col-span-12"},Q={key:0},X={class:"col-span-12"},Z={key:0},ee={key:0,class:"col-span-12"},ae={key:0},te={class:"col-span-12"},se={key:0},oe={class:"col-span-12"},le={key:0},ie={key:1,class:"col-span-12 text-center"},re=v(()=>l("span",{class:"text-white"},[d("Atau masukkan kode reservasi. "),l("br"),d(" jika anda melakukan reservasi sebelumnya")],-1)),ne=[re],de={key:2,class:"col-span-12"},ue={class:"text-center"},ce={data(){return{v$:k(),isModalVisible:!1,nama:null,pax:null,telpon:null,tanggal:null,table_id:null,kode:null,jenis:null,latitude:null,longitude:null,promo:this.$page.props.blogs,settings:{itemsToShow:1,snapAlign:"center"},breakpoints:{700:{itemsToShow:3,snapAlign:"center"}}}},created(){this.getLocation(),this.Cookies.get("order")!=null&&this.$inertia.visit("/order",{method:"get",data:JSON.parse(this.Cookies.get("order")),replace:!1,preserveState:!0,preserveScroll:!1})},computed:{modalOpened(){return this.jenis=="order"?"Lanjutkan pemesanan":"Reservasi sekarang"}},validations(){const e={nama:{required:p},pax:{required:p},telpon:{required:p},table_id:{required:p}};return this.jenis=="reservasi"?e.tanggal={required:p}:e.tanggal={},e},methods:{showModal(e){this.v$.$reset(),this.jenis=e,this.isModalVisible=!0},closeModal(){this.isModalVisible=!1},async onsubmit(){this.jenis=="order"?await this.submit():await this.submitReservasi()},getLocation(){navigator.geolocation?navigator.geolocation.getCurrentPosition(this.showPosition):this.location="Geolocation is not supported by this browser."},showPosition(e){this.latitude=e.coords.latitude,this.longitude=e.coords.longitude},async submit(){var e=this;if(this.kode==null||this.kode==""){if(!await this.v$.$validate())return;var a={nama:e.nama,telpon:e.telpon,pax:e.pax,table_id:e.table_id};e.Cookies.set("order",JSON.stringify(a),{expires:1}),e.$inertia.visit("/order",{method:"get",data:a,replace:!1,preserveState:!0,preserveScroll:!1})}else this.v$.$reset();axios.post("/check-location",{latitude:this.latitude,longitude:this.longitude}).then(function(t){t.data.status==1?e.kode!=null&&e.kode!=""&&(e.$root.$loading.loading=!0,axios.post("/checkIfCodeExist",{kode:e.kode,latitude:e.latitude,longitude:e.longitude}).then(function(s){if(s.data.status==1){e.nama=s.data.data.nama,e.telpon=s.data.data.telpon,e.pax=s.data.data.pax,e.table_id=s.data.data.table_id;var h={nama:e.nama,telpon:e.telpon,pax:e.pax,table_id:e.table_id,reservation_id:s.data.reservation_id};e.Cookies.set("order",JSON.stringify(h),{expires:1}),e.$inertia.visit("/order",{method:"get",data:h,replace:!1,preserveState:!0,preserveScroll:!1})}else e.$toaster.warning(s.data.message);e.$root.$loading.loading=!1}).catch(function(s){e.$root.$loading.loading=!1}).finally(function(){})):e.$toaster.warning(t.data.message),e.$root.$loading.loading=!1}).catch(function(t){e.$root.$loading.loading=!1}).finally(function(){})},async submitReservasi(){if(!!await this.v$.$validate()){var a=this;this.$root.$loading.loading=!0,axios.post("/submit-reservasi",{nama:this.nama,telpon:this.telpon,pax:this.pax,table_id:this.table_id,tanggal:this.tanggal}).then(function(t){t.data.status==1?a.$inertia.visit("/receipt",{method:"get",data:{id:t.data.id},replace:!1,preserveState:!0,preserveScroll:!1}):a.$toaster.warning(t.data.message),a.$root.$loading.loading=!1}).catch(function(t){a.$root.$loading.loading=!1}).finally(function(){})}}}},pe=Object.assign(ce,{__name:"Welcome",setup(e){return(a,t)=>(i(),r(b,null,[o(c($),{title:"Dashboard"}),o(T,null,{default:n(()=>[l("div",U,[l("div",q,[o(c(F),{settings:a.settings,breakpoints:a.breakpoints,"wrap-around":!0},{addons:n(()=>[o(c(H))]),default:n(()=>[(i(!0),r(b,null,w(a.$data.promo,s=>(i(),y(c(I),{key:s},{default:n(()=>[l("div",L,[l("img",{src:s.url,class:"w-full rounded-lg object-contain h-56"},null,8,Y)])]),_:2},1024))),128))]),_:1},8,["settings","breakpoints"])]),l("div",A,[B,l("div",W,[o(_,{class:"rounded-full text-md text-center py-4 font-bold text-white bg-purple-500 hover:bg-purple-400 md:w-3/12 w-1/2 focus:bg-purple-800 active:bg-purple-800",onClick:t[0]||(t[0]=s=>a.showModal("order"))},{default:n(()=>[d("Order Sekarang ")]),_:1})]),E,l("div",z,[o(_,{class:"rounded-full text-md md:px-20 py-4 font-bold text-gray-700 bg-yellow-500 hover:bg-yellow-400 md:w-3/12 w-1/2 focus:bg-yellow-700 active:bg-yellow-700",onClick:t[1]||(t[1]=s=>a.showModal("reservasi"))},{default:n(()=>[d("Reservasi ")]),_:1})])])]),x(o(O,{modalSize:"sm",onClose:a.closeModal},{header:n(()=>[G]),body:n(()=>[l("form",{onSubmit:t[8]||(t[8]=M((...s)=>a.submit&&a.submit(...s),["prevent"])),class:"grid grid-cols-12 gap-4"},[l("div",K,[o(g,{for:"nama",value:"Nama",class:"text-white font-extrabold"}),o(f,{id:"nama",type:"text",class:"mt-1 block w-full rounded-3xl",modelValue:a.$data.nama,"onUpdate:modelValue":t[2]||(t[2]=s=>a.$data.nama=s),required:"",autocomplete:"nama",placeholder:"Masukan nama anda"},null,8,["modelValue"]),a.v$.nama.$error?(i(),r("div",Q,[o(m,{message:"Nama Harus Diisi"})])):u("",!0)]),l("div",X,[o(g,{for:"table_id",value:"Nomor Meja",class:"text-white font-extrabold"}),o(R,{modelValue:a.$data.table_id,"onUpdate:modelValue":t[3]||(t[3]=s=>a.$data.table_id=s),class:"rounded-3xl"},null,8,["modelValue"]),a.v$.table_id.$error?(i(),r("div",Z,[o(m,{message:"Nomor Meja Harus Diisi"})])):u("",!0)]),a.jenis!="order"?(i(),r("div",ee,[o(g,{for:"tanggal",value:"Tanggal Reservasi",class:"text-white font-extrabold"}),o(c(S),{modelValue:a.$data.tanggal,"onUpdate:modelValue":t[4]||(t[4]=s=>a.$data.tanggal=s),position:"right",autoPosition:!1,utc:"preserve",minDate:new Date},null,8,["modelValue","minDate"]),a.v$.tanggal.$error?(i(),r("div",ae,[o(m,{message:"Tanggal Harus Diisi"})])):u("",!0)])):u("",!0),l("div",te,[o(g,{for:"pax",value:"Jumlah Pelanggan",class:"text-white font-extrabold"}),o(f,{id:"pax",type:"number",class:"mt-1 block w-full rounded-3xl",modelValue:a.$data.pax,"onUpdate:modelValue":t[5]||(t[5]=s=>a.$data.pax=s),required:"",autocomplete:"pax",placeholder:"Masukan jumlah pelanggan"},null,8,["modelValue"]),a.v$.pax.$error?(i(),r("div",se,[o(m,{message:"Jumlah Pelanggan Harus Diisi"})])):u("",!0)]),l("div",oe,[o(g,{for:"telpon",value:"Telpon",class:"text-white font-extrabold"}),o(f,{id:"telpon",type:"text",class:"mt-1 block w-full rounded-3xl",modelValue:a.$data.telpon,"onUpdate:modelValue":t[6]||(t[6]=s=>a.$data.telpon=s),required:"",autocomplete:"telpon",placeholder:"Masukan telpon anda"},null,8,["modelValue"]),a.v$.telpon.$error?(i(),r("div",le,[o(m,{message:"Telpon Harus Diisi"})])):u("",!0)]),a.jenis=="order"?(i(),r("div",ie,ne)):u("",!0),a.jenis=="order"?(i(),r("div",de,[o(f,{id:"kode",type:"text",class:"mt-1 block w-full rounded-3xl",modelValue:a.$data.kode,"onUpdate:modelValue":t[7]||(t[7]=s=>a.$data.kode=s),required:"",autocomplete:"kode",placeholder:"Masukan kode reservasi anda"},null,8,["modelValue"])])):u("",!0)],32)]),footer:n(()=>[l("div",ue,[o(_,{onClick:a.onsubmit,class:"text-gray-700 hover:bg-yellow-300 focus:bg-yellow-700 active:bg-yellow-700 bg-yellow-500 font-extrabold"},{default:n(()=>[d(C(a.modalOpened),1)]),_:1},8,["onClick"])])]),_:1},8,["onClose"]),[[V,a.isModalVisible]])]),_:1})],64))}});var we=P(pe,[["__scopeId","data-v-4c7ddaf5"]]);export{we as default};
